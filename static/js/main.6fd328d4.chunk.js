(this["webpackJsonpreact-auth"]=this["webpackJsonpreact-auth"]||[]).push([[0],{103:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),o=n(16),s=n.n(o),i=n(19),u=n(25),l=(n(103),n(17)),d=n(18),j=n(21),h=n(20),p=n(9),b=n(7),O=n(52),f=n.n(O),m=n(53),v=n.n(m),g=function(e){var t=e.valid,n=e.touched;return!t&&n},x=function(e){var t=[v.a.Input],n=e.type||"text",a="".concat(n," - ").concat(Math.random());return g(e)&&t.push(v.a.invalid),Object(r.jsxs)("div",{className:t.join(" "),children:[Object(r.jsx)("label",{htmlFor:a,children:e.label}),Object(r.jsx)("input",{type:n,name:a,value:e.value,onChange:e.onChange}),g(e)?Object(r.jsx)("span",{children:e.errorMessage}):null]})},y=n(70),k=n.n(y),_=function(e){return Object(r.jsx)("button",{className:k.a.Button,disabled:e.disabled,onClick:e.onClick,children:e.children})},C=n(32),S=n.n(C),w=n(38),E=n(39),T=n.n(E),A="AUTH_START",N="AUTH_SUCCESS",U="AUTH_ERROR",H="AUTH_LOGOUT",L="FETCH_USERS_START",R="FETCH_USERS_SUCCESS",I="FETCH_USERS_ERROR",D="SEARCH_USERS",F="FILTER_USERS",B=function(e){return{type:N,token:e}},M=function(){return{type:U}},V=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isFormValid:!1,inputControls:{userName:{label:"Username",value:"",valid:!1,touced:!1,validation:{required:!0,minLength:1},errorMessage:"Enter username"},password:{type:"password",label:"Password",value:"",valid:!1,touched:!1,validation:{required:!0,minLength:1},errorMessage:"Enter password"}}},e.onSubmitHandler=function(e){e.preventDefault()},e.inputValidation=function(e,t){if(!e)return!0;var n=!0;return e.minLength&&(n=n&&t.length>=e.minLength),e.required&&(n=n&&""!==t.trim()),n},e.onChangeHandler=function(t,n){var r=Object(b.a)({},e.state.inputControls),a=r[n],c=!0;a.touched=!0,a.value=t.target.value,a.valid=e.inputValidation(a.validation,a.value),r[n]=a,Object.keys(r).forEach((function(e){c=c&&r[e].valid})),e.setState({isFormValid:c,inputControls:r})},e.loginHandler=function(){e.props.auth(e.state.inputControls.userName.value,e.state.inputControls.password.value)},e}return Object(d.a)(n,[{key:"renderInput",value:function(){var e=this,t=Object(b.a)({},this.state.inputControls);return Object.keys(t).map((function(n,a){var c=t[n];return Object(r.jsx)(x,{label:c.label,type:c.type,value:c.value,onChange:function(t){return e.onChangeHandler(t,n)},errorMessage:c.errorMessage,valid:c.valid,touched:c.touched},n+a)}))}},{key:"renderButton",value:function(){return Object(r.jsx)(_,{disabled:!this.state.isFormValid,onClick:this.loginHandler,children:"Login"})}},{key:"render",value:function(){return this.props.isAuthenticated?Object(r.jsx)(p.a,{to:"/users"}):Object(r.jsx)("div",{className:f.a.Auth,children:Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:this.onSubmitHandler,children:[Object(r.jsx)("h1",{children:"Sign in"}),this.props.isError?Object(r.jsx)("span",{className:f.a.error,children:"Wrong username/password"}):null,this.renderInput(),this.renderButton()]})})})}}]),n}(a.Component),J=Object(i.b)((function(e){return{isAuthenticated:!!e.auth.token,isError:e.auth.isError}}),(function(e){return{auth:function(t,n){return e(function(e,t){return function(){var n=Object(w.a)(S.a.mark((function n(r){var a,c,o,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={username:e,password:t},c=T.a.create({baseURL:"https://emphasoft-test-assignment.herokuapp.com"}),n.prev=3,n.next=6,c.post("api-token-auth/",a);case 6:o=n.sent,s=o.data,localStorage.setItem("token",s.token),r(B(s.token)),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(3),console.error(n.t0),r(M());case 16:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(V),z=n(71),P=n.n(z),X=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:P.a.Layout,children:Object(r.jsx)("main",{children:this.props.children})})}}]),n}(a.Component),q=n(155),W=n(72),G=n.n(W),Y=n(147),K=n(145),Q=n(146),Z=n(158),$=function(e){var t=Object.keys(e.tableHead);return Object(r.jsx)(K.a,{style:{backgroundColor:"#9c89b8"},children:Object(r.jsxs)(Q.a,{children:[Object(r.jsx)(Y.a,{}),t.slice(0,-1).map((function(t,n){return Object(r.jsxs)(Y.a,{style:{color:"#fff"},align:"right",children:[t,"id"===t?Object(r.jsx)(Z.a,{active:!0,direction:e.order,onClick:e.onClick}):null]},n)}))]})})},ee=n(80),te=n(148),ne=n(156),re=n(157),ae=n(149),ce=n(151),oe=n(152),se=n(150),ie=n(77),ue=n.n(ie),le=n(76),de=n.n(le),je=Object(te.a)({root:{"& > *":{borderBottom:"unset"}}}),he=function(e){var t=e.row,n=Object.keys(t),o=c.a.useState(!1),s=Object(ee.a)(o,2),i=s[0],u=s[1],l=je();return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsxs)(Q.a,{className:l.root,children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(ae.a,{"aria-label":"expand row",size:"small",onClick:function(){return u(!i)},children:i?Object(r.jsx)(de.a,{}):Object(r.jsx)(ue.a,{})})}),n.slice(0,-1).map((function(e,n){return Object(r.jsx)(Y.a,{align:"right",component:"id"===e?"th":"td",scope:"id"===e?"row":null,children:"".concat(t[e])},n)}))]}),Object(r.jsx)(Q.a,{children:Object(r.jsx)(Y.a,{style:{paddingBottom:0,paddingTop:0},colSpan:5,children:Object(r.jsx)(re.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(ne.a,{margin:1,style:{maxWidth:600},children:[Object(r.jsx)(se.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Detail"}),Object(r.jsxs)(ce.a,{size:"small","aria-label":"purchases",children:[Object(r.jsx)(K.a,{children:Object(r.jsx)(Q.a,{children:Object.keys(t.detail).map((function(e,t){return Object(r.jsx)(Y.a,{children:e},t)}))})}),Object(r.jsx)(oe.a,{children:Object(r.jsx)(Q.a,{children:Object.keys(t.detail).map((function(e,n){return Object(r.jsx)(Y.a,{component:"id"===e?"th":"td",scope:"id"===e?"row":null,children:"".concat(t.detail[e])},n)}))})})]})]})})})})]})},pe=n(153),be=n(79),Oe=n(154),fe=function(){return function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r,a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",n=localStorage.getItem("token"),t(me()),e.prev=3,e.next=6,T.a.get("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{headers:{Authorization:"Token ".concat(n)}});case 6:r=e.sent,a=r.data,c=[],a.forEach((function(e){c.push({id:e.id,username:""!==e.username?e.username:"-",first_name:""!==e.first_name?e.first_name:"-",last_name:""!==e.last_name?e.last_name:"-",detail:{is_active:e.is_active?"Active":"Not active",last_login:e.last_login?new Date(e.last_login).toLocaleString():"Unknown",is_superuser:e.is_superuser?"Yes":"No"}})})),t(ve(c,n)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),t(ge()),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}()},me=function(){return{type:L}},ve=function(e,t){return{type:R,data:e,token:t}},ge=function(){return{type:I}},xe=Object(be.a)({overrides:{MuiTableCell:{root:{padding:"5px 10px",boxSizing:"border-box"}}}}),ye=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).sortClickHandler=function(){var t="asc"===e.props.order?"desc":"asc";e.props.filter(t)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.userss.sort((function(t,n){return t.id<n.id?"asc"===e.props.order?-1:1:t.id>n.id?"asc"===e.props.order?1:-1:0}));return Object(r.jsx)(pe.a,{theme:xe,children:Object(r.jsx)(Oe.a,{style:{borderRadius:10},children:Object(r.jsxs)(ce.a,{"aria-label":"collapsible table",style:{minWidth:420,width:"100%",margin:"0 auto"},children:[Object(r.jsx)($,{order:this.props.order,tableHead:this.props.userss[0],onClick:function(){return e.sortClickHandler()}}),Object(r.jsx)(oe.a,{style:{background:"#fff"},children:t.map((function(t,n){return t.username.toLowerCase().includes(e.props.searchName.toLowerCase().trim(" "))?Object(r.jsx)(he,{row:t},n):null}))})]})})})}}]),n}(a.Component),ke=Object(i.b)((function(e){return{usersData:e.users.data,loading:e.users.loading,order:e.filter.direction}}),(function(e){return{users:function(){return e(fe())},filter:function(t){return e(function(e){return{type:F,order:e}}(t))}}}))(ye),_e=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onChangeHandler=function(t){e.props.search(t.target.value)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.users()}},{key:"render",value:function(){return Object(r.jsx)("div",{className:G.a.Users,children:this.props.loading?Object(r.jsx)(q.a,{}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(x,{label:"Search username",value:this.props.serachName,onChange:this.onChangeHandler}),Object(r.jsx)(u.b,{to:"/logout",children:"Logout"})]}),Object(r.jsx)(ke,{searchName:this.props.serachName,userss:this.props.usersData})]})})}}]),n}(a.Component),Ce=Object(i.b)((function(e){return{usersData:e.users.data,serachName:e.search,loading:e.users.loading}}),(function(e){return{users:function(){return e(fe())},search:function(t){return e({type:D,search:t})}}}))(_e),Se=n(81),we=function(e){var t=e.component,n=e.auth,a=Object(Se.a)(e,["component","auth"]);return Object(r.jsx)(p.b,Object(b.a)(Object(b.a)({},a),{},{render:function(e){return!0===n?Object(r.jsx)(t,Object(b.a)({},e)):Object(r.jsx)(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ee=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return Object(r.jsx)(p.a,{to:"/login"})}}]),n}(a.Component),Te=Object(i.b)(null,(function(e){return{logout:function(){return e((localStorage.removeItem("token"),{type:H}))}}}))(Ee),Ae=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.isToken()}},{key:"render",value:function(){return Object(r.jsx)(X,{children:Object(r.jsxs)(p.d,{children:[Object(r.jsx)(p.b,{path:"/login",component:J}),Object(r.jsx)(p.b,{path:"/logout",component:Te}),Object(r.jsx)(we,{path:"/users",component:Ce,auth:this.props.isAuthenticated}),Object(r.jsx)(p.a,{from:"/",to:"login"})]})})}}]),n}(a.Component),Ne=Object(p.g)(Object(i.b)((function(e){return{isAuthenticated:!!e.auth.token}}),(function(e){return{isToken:function(){return e({type:A})}}}))(Ae)),Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,160)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},He=n(30),Le=n(78),Re={token:null,success:!1,isError:!1},Ie={data:[],loading:!0},De={direction:"asc"},Fe=Object(He.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(b.a)(Object(b.a)({},e),{},{token:localStorage.getItem("token")});case N:return Object(b.a)(Object(b.a)({},e),{},{token:t.token,success:!0,isError:!1});case U:return Object(b.a)(Object(b.a)({},e),{},{success:!1,isError:!0});case H:return Object(b.a)(Object(b.a)({},e),{},{token:null});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case R:return Object(b.a)(Object(b.a)({},e),{},{data:t.data,loading:!1});case I:return Object(b.a)(Object(b.a)({},e),{},{isError:!0});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return t.search;default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(b.a)(Object(b.a)({},e),{},{direction:t.order});default:return e}}}),Be=Object(He.e)(Fe,Object(He.d)(Object(He.a)(Le.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));s.a.render(Object(r.jsx)(i.a,{store:Be,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(Ne,{})})}),document.getElementById("root")),Ue()},52:function(e,t,n){e.exports={Auth:"Auth__Auth--2N4mh",error:"Auth__error--r2_yn"}},53:function(e,t,n){e.exports={Input:"Input__Input--2JD9x",invalid:"Input__invalid--2PJ1J"}},70:function(e,t,n){e.exports={Button:"Button__Button--3bi60"}},71:function(e,t,n){e.exports={Layout:"Layout__Layout--2wiTF"}},72:function(e,t,n){e.exports={Users:"Users__Users--158Mh"}}},[[124,1,2]]]);
//# sourceMappingURL=main.6fd328d4.chunk.js.map