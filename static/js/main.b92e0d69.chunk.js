(this["webpackJsonpreact-auth"]=this["webpackJsonpreact-auth"]||[]).push([[0],{102:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n.n(a),c=n(16),o=n.n(c),i=n(27),u=n(33),l=(n(102),n(18)),d=n(19),h=n(21),j=n(20),p=n(8),b=n(10),O=n(52),f=n.n(O),v=n(53),m=n.n(v),g=function(e){var t=e.valid,n=e.touched;return!t&&n},x=function(e){var t=[m.a.Input],n=e.type||"text",a="".concat(n," - ").concat(Math.random());return g(e)&&t.push(m.a.invalid),Object(r.jsxs)("div",{className:t.join(" "),children:[Object(r.jsx)("label",{htmlFor:a,children:e.label}),Object(r.jsx)("input",{type:n,name:a,value:e.value,onChange:e.onChange}),g(e)?Object(r.jsx)("span",{children:e.errorMessage}):null]})},k=n(70),y=n.n(k),_=function(e){return Object(r.jsx)("button",{className:y.a.Button,disabled:e.disabled,onClick:e.onClick,children:e.children})},C=n(31),S=n.n(C),w=n(38),E=n(39),N=n.n(E),H="AUTH_SUCCESS",L="AUTH_ERROR",T="LOGOUT",U="FETCH_USERS_START",R="FETCH_USERS_SUCCESS",F="FETCH_USERS_ERROR",I="SEARCH_USERS",A="FILTER_USERS",D=function(e){return{type:H,token:e}},B=function(){return{type:L}},M=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isFormValid:!1,inputControls:{userName:{label:"Username",value:"",valid:!1,touced:!1,validation:{required:!0,minLength:1},errorMessage:"Enter username"},password:{type:"password",label:"Password",value:"",valid:!1,touched:!1,validation:{required:!0,minLength:1},errorMessage:"Enter password"}}},e.onSubmitHandler=function(e){e.preventDefault()},e.inputValidation=function(e,t){if(!e)return!0;var n=!0;return e.minLength&&(n=n&&t.length>=e.minLength),e.required&&(n=n&&""!==t.trim()),n},e.onChangeHandler=function(t,n){var r=Object(b.a)({},e.state.inputControls),a=r[n],s=!0;a.touched=!0,a.value=t.target.value,a.valid=e.inputValidation(a.validation,a.value),r[n]=a,Object.keys(r).forEach((function(e){s=s&&r[e].valid})),e.setState({isFormValid:s,inputControls:r})},e.loginHandler=function(){e.props.auth(e.state.inputControls.userName.value,e.state.inputControls.password.value)},e}return Object(d.a)(n,[{key:"renderInput",value:function(){var e=this,t=Object(b.a)({},this.state.inputControls);return Object.keys(t).map((function(n,a){var s=t[n];return Object(r.jsx)(x,{label:s.label,type:s.type,value:s.value,onChange:function(t){return e.onChangeHandler(t,n)},errorMessage:s.errorMessage,valid:s.valid,touched:s.touched},n+a)}))}},{key:"renderButton",value:function(){return Object(r.jsx)(_,{disabled:!this.state.isFormValid,onClick:this.loginHandler,children:"Login"})}},{key:"render",value:function(){return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("div",{className:f.a.Auth,children:Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:this.onSubmitHandler,children:[Object(r.jsx)("h1",{children:"Sign in"}),this.props.isError?Object(r.jsx)("span",{className:f.a.error,children:"Wrong username/password"}):null,this.renderInput(),this.renderButton()]})})}),this.props.token?Object(r.jsx)(p.a,{to:"/users"}):null]})}}]),n}(a.Component),V=Object(i.b)((function(e){return{token:e.auth.token,isError:e.auth.isError}}),(function(e){return{auth:function(t,n){return e(function(e,t){return function(){var n=Object(w.a)(S.a.mark((function n(r){var a,s,c,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={username:e,password:t},s=N.a.create({baseURL:"https://emphasoft-test-assignment.herokuapp.com"}),n.prev=3,n.next=6,s.post("api-token-auth/",a);case 6:c=n.sent,o=c.data,localStorage.setItem("token",o.token),r(D(o.token)),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(3),console.error(n.t0),r(B());case 16:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(M),J=n(71),z=n.n(J),P=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:z.a.Layout,children:Object(r.jsx)("main",{children:this.props.children})})}}]),n}(a.Component),X=n(154),q=n(72),W=n.n(q),G=n(146),Y=n(144),K=n(145),Q=n(157),Z=function(e){var t=Object.keys(e.tableHead);return Object(r.jsx)(Y.a,{style:{backgroundColor:"#9c89b8"},children:Object(r.jsxs)(K.a,{children:[Object(r.jsx)(G.a,{}),t.slice(0,-1).map((function(t,n){return Object(r.jsxs)(G.a,{style:{color:"#fff"},align:"right",children:[t,"id"===t?Object(r.jsx)(Q.a,{active:!0,direction:e.order,onClick:e.onClick}):null]},n)}))]})})},$=n(80),ee=n(147),te=n(155),ne=n(156),re=n(148),ae=n(150),se=n(151),ce=n(149),oe=n(77),ie=n.n(oe),ue=n(76),le=n.n(ue),de=Object(ee.a)({root:{"& > *":{borderBottom:"unset"}}}),he=function(e){var t=e.row,n=Object.keys(t),c=s.a.useState(!1),o=Object($.a)(c,2),i=o[0],u=o[1],l=de();return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsxs)(K.a,{className:l.root,children:[Object(r.jsx)(G.a,{children:Object(r.jsx)(re.a,{"aria-label":"expand row",size:"small",onClick:function(){return u(!i)},children:i?Object(r.jsx)(le.a,{}):Object(r.jsx)(ie.a,{})})}),n.slice(0,-1).map((function(e,n){return Object(r.jsx)(G.a,{align:"right",component:"id"===e?"th":"td",scope:"id"===e?"row":null,children:"".concat(t[e])},n)}))]}),Object(r.jsx)(K.a,{children:Object(r.jsx)(G.a,{style:{paddingBottom:0,paddingTop:0},colSpan:5,children:Object(r.jsx)(ne.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(te.a,{margin:1,style:{maxWidth:600},children:[Object(r.jsx)(ce.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Detail"}),Object(r.jsxs)(ae.a,{size:"small","aria-label":"purchases",children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(K.a,{children:Object.keys(t.detail).map((function(e,t){return Object(r.jsx)(G.a,{children:e},t)}))})}),Object(r.jsx)(se.a,{children:Object(r.jsx)(K.a,{children:Object.keys(t.detail).map((function(e,n){return Object(r.jsx)(G.a,{component:"id"===e?"th":"td",scope:"id"===e?"row":null,children:"".concat(t.detail[e])},n)}))})})]})]})})})})]})},je=n(152),pe=n(79),be=n(153),Oe=function(){return function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r,a,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",n=localStorage.getItem("token"),t(fe()),e.prev=3,e.next=6,N.a.get("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{headers:{Authorization:"Token ".concat(n)}});case 6:r=e.sent,a=r.data,s=[],a.forEach((function(e){s.push({id:e.id,username:""!==e.username?e.username:"-",first_name:""!==e.first_name?e.first_name:"-",last_name:""!==e.last_name?e.last_name:"-",detail:{is_active:e.is_active?"Active":"Not active",last_login:e.last_login?new Date(e.last_login).toLocaleString():"Unknown",is_superuser:e.is_superuser?"Yes":"No"}})})),t(ve(s,n)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),t(me()),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}()},fe=function(){return{type:U}},ve=function(e,t){return{type:R,data:e,token:t}},me=function(){return{type:F}},ge=Object(pe.a)({overrides:{MuiTableCell:{root:{padding:"5px 10px",boxSizing:"border-box"}}}}),xe=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).sortClickHandler=function(){var t="asc"===e.props.order?"desc":"asc";e.props.filter(t)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.userss.sort((function(t,n){return t.id<n.id?"asc"===e.props.order?-1:1:t.id>n.id?"asc"===e.props.order?1:-1:0}));return Object(r.jsx)(je.a,{theme:ge,children:Object(r.jsx)(be.a,{style:{borderRadius:10},children:Object(r.jsxs)(ae.a,{"aria-label":"collapsible table",style:{minWidth:420,width:"100%",margin:"0 auto"},children:[Object(r.jsx)(Z,{order:this.props.order,tableHead:this.props.userss[0],onClick:function(){return e.sortClickHandler()}}),Object(r.jsx)(se.a,{style:{background:"#fff"},children:t.map((function(t,n){return t.username.toLowerCase().includes(e.props.searchName.toLowerCase().trim(" "))?Object(r.jsx)(he,{row:t},n):null}))})]})})})}}]),n}(a.Component),ke=Object(i.b)((function(e){return{usersData:e.users.data,loading:e.users.loading,order:e.filter.direction}}),(function(e){return{users:function(){return e(Oe())},filter:function(t){return e(function(e){return{type:A,order:e}}(t))}}}))(xe),ye=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onChangeHandler=function(t){e.props.search(t.target.value)},e.logoutHandler=function(){e.props.logout()},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.users()}},{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:W.a.Users,children:this.props.loading?Object(r.jsx)(X.a,{}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(x,{label:"Search username",value:this.props.serachName,onChange:this.onChangeHandler}),Object(r.jsx)(_,{onClick:function(){return e.logoutHandler()},children:"logout"})]}),Object(r.jsx)(ke,{searchName:this.props.serachName,userss:this.props.usersData}),this.props.token?null:Object(r.jsx)(p.a,{to:"/login"})]})})}}]),n}(a.Component),_e=Object(i.b)((function(e){return{usersData:e.users.data,serachName:e.search,loading:e.users.loading,token:e.users.token}}),(function(e){return{users:function(){return e(Oe())},logout:function(){return e((localStorage.removeItem("token"),{type:T}))},search:function(t){return e({type:I,search:t})}}}))(ye),Ce=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)(P,{children:Object(r.jsxs)(p.d,{children:[Object(r.jsx)(p.b,{path:"/users",component:_e}),Object(r.jsx)(p.b,{path:"/login",component:V}),Object(r.jsx)(p.a,{from:"/",to:"/login"})]})})}}]),n}(a.Component),Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,159)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},we=n(29),Ee=n(78),Ne={token:null,success:!1,isError:!1},He={data:[],success:!1,loading:!0,token:null},Le={direction:"asc"},Te=Object(we.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(b.a)(Object(b.a)({},e),{},{token:t.token,success:!0,isError:!1});case L:return Object(b.a)(Object(b.a)({},e),{},{success:!1,isError:!0});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case R:return Object(b.a)(Object(b.a)({},e),{},{data:t.data,success:!0,loading:!1,token:t.token});case F:return Object(b.a)(Object(b.a)({},e),{},{isError:!0,success:!1});case T:return Object(b.a)(Object(b.a)({},e),{},{token:null});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return t.search;default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(b.a)(Object(b.a)({},e),{},{direction:t.order});default:return e}}}),Ue=Object(we.e)(Te,Object(we.d)(Object(we.a)(Ee.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(Object(r.jsx)(i.a,{store:Ue,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(Ce,{})})}),document.getElementById("root")),Se()},52:function(e,t,n){e.exports={Auth:"Auth__Auth--2N4mh",error:"Auth__error--r2_yn"}},53:function(e,t,n){e.exports={Input:"Input__Input--2JD9x",invalid:"Input__invalid--2PJ1J"}},70:function(e,t,n){e.exports={Button:"Button__Button--3bi60"}},71:function(e,t,n){e.exports={Layout:"Layout__Layout--2wiTF"}},72:function(e,t,n){e.exports={Users:"Users__Users--158Mh"}}},[[123,1,2]]]);
//# sourceMappingURL=main.b92e0d69.chunk.js.map